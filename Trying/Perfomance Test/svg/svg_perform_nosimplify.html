<!DOCTYPE html>
<html>
<head>
	<script src="../jquery.min.js"></script>
	<script src="../app.js"></script>
	<script src="../stats.js"></script>
	<script src="../simplify.js"></script>
	<script>

        $(document).ready( function() {
        	
        		stats = stats();
				

				$.getJSON( "../api/data.json", function( data ) {
					data_count = data.count;
					data = data.data;
				
					var aktiv_random = false;
					var interval_counter = 1;

					var update = function () {
						var line_points = new Array(new Array(0,0));
						$("#container").empty();
						var counter = 0;
						var y_range = 10;
					    interval_counter++;
					
						$('#linescount').html(data_count);
						var random_limit = Math.floor(Math.random() * data_count) + 1;
					    stats.begin();
			
						//console.log(interval_counter);
					
						$.each(data, function(i,val){
							if($('#limit_lines').val() < counter){
								return false;
							}
							counter++;

							var random_x = Math.floor(Math.random() * 1000) + 1;
							
							y_range += 0.02;
							
					
							line_points.push(new Array( y_range, (val.chanels[0].value/50)));
							if(counter > 1){
								line_points.shift();
							}
							
							x1 = line_points[0][0];
							y1 = line_points[0][1];
							x2 = line_points[1][0];
							y2 = line_points[1][1];
						
							
								var newLine = document.createElementNS('http://www.w3.org/2000/svg','line');
							    newLine.setAttribute('id','time_'+val.time);
							    newLine.setAttribute('x1',x1);
							    newLine.setAttribute('y1',y1);
							    newLine.setAttribute('x2',x2);
							    newLine.setAttribute('y2',y2);
							    newLine.setAttribute('style','stroke:rgb(0,0,0)');

								$("#container").append(newLine);	
						  					  
						})
					
						$('#counter').html("Redraw Count:"+interval_counter);
				
						stats.end();
						$('#linescount').html(data_count);
				
						requestAnimationFrame( update );
					
					};
							
					requestAnimationFrame( update );

			});	
			
		
				
			
			
		   
		});
	
	</script>
</head>
<body>
<h1 style="text-align:center;">SVG Lines - no simplify</h1>

<svg width="1600" height="500" top="200" id="container">

  </svg> 

<p>Data exists for <a id="linescount"></a> Points</p>
<p>Value for max points:<input id="limit_lines" value="25000" type"name"/></p>
<p id="counter"></p>  
</body>
</html>