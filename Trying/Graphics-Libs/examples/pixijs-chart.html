<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="stylesheet" href="../css/reset.css"/>
  <link rel="stylesheet" href="../css/normalise.css"/>
  <link rel="stylesheet" href="../css/base.css"/>
  <link rel="stylesheet" href="../css/perf.css"/>

  <script src="../libs/zepto.js"></script>
  <script src="../libs/pixi/pixi.js"></script>
  <script src="../js/pixijs-functions.js"></script>
  <script src="../api/data.min.morechannels.js"></script> 

  <script>
    $(document).ready( function() {   
	  var dataCount = jsonData.count;
	  var rawData = jsonData.data;
	  var interval;
      $('#drawing').submit(function(){
    	init();
    	clearInterval(interval);
    	var indexValue = 0;
    	var dataValues = [];
    	var lastYValue = 0;
    	var lastXValue = 0;

	    interval = setInterval(function(){
	      var newPoints = [[],[],[]];
	      
	      newPoints[0][0] = 0;
	      //newPoint[0][1] = Math.floor(Math.random() * (400 - 0 + 1)) + 0;
	      newPoints[0][1] = rawData[indexValue].chanels[0]['value']/100;
	      newPoints[0][2] = indexValue

	      newPoints[1][0] = 0;
	      //newPoint[0][1] = Math.floor(Math.random() * (400 - 0 + 1)) + 0;
	      newPoints[1][1] = rawData[indexValue].chanels[1]['value']/100;
	      newPoints[1][2] = indexValue
	      
	      newPoints[2][0] = 0;
	      //newPoint[0][1] = Math.floor(Math.random() * (400 - 0 + 1)) + 0;
	      newPoints[2][1] = rawData[indexValue].chanels[2]['value']/100;
	      newPoints[2][2] = indexValue

	      indexValue++;
	      if(indexValue>=1){
	        dataValues.push(newPoints);
	        drawChart(dataValues, indexValue);
		  }
	    }, 500);
	    return false;
      });
    });

  </script>
</head>
<body>
  <h1>Draw lines with two.js</h1>
  <form id="drawing">
  <table>
    <tr> 
      <td></td>
      <td></td>
      <td><input type="submit" id="drawBtn" value="draw" /></td>
    </tr>
 
  </table>
  </form>
  <br />
<div id="myChartHolder">
</div>
  <div class="download">
  	<a href='../Perf.zip'>Download source</a>
  </div>  
</body>
</html>